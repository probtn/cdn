<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
        <style>
            html, body {
                margin: 0px;
                padding: 0px;
                height:  100%;
                width: 100%;
            }
			#images_cache {
				display: none !important;
			}
        </style>
    </head>
    <body>
        <div id="images_cache">	
			<img src="bork-btn-1.png?r=113" alt="bork"/>
			<img src="bork-btn-2.png?r=113" alt="bork"/>
			<img src="bork-btn-3.png?r=113" alt="bork"/>
			<img src="bork-btn-4.png?r=113" alt="bork"/>
            <img src="bork-btn-5.png?r=113" alt="bork"/>
		</div>

        <div id="image_container">
            <img src="bork-btn-1.png?r=114" id="image" alt="bork"/>
        </div>

        <div id="orientation" style="display: none;">
            <span>alpha: <i id="alpha"></i></span><br/>
            <span>beta: <i id="beta"></i></span><br/>
            <span>gamma: <i id="gamma"></i></span><br/>
            <span>orient: <i id="orient"></i></span><br/>
            <span>orient: <i id="img_debug"></i></span><br/>
        </div>

        <div id="acceleration" style="display: none;">
            <span>x: <i id="x"></i></span><br/>
            <span>y: <i id="y"></i></span><br/>
            <span>z: <i id="z"></i></span><br/>
            <span>active: <i id="active"></i></span>
        </div>
        <script>
            window.addEventListener("message", receiveMessage, false);

            function receiveMessage(event)
            {
                if ((event.data!==null) && (event.data!==undefined)) {
                    if (event.data.message === "probtn_page_deviceorientation") {

                        $("#orientation #alpha").text(event.data.dataEvent.alpha);
                        $("#orientation #beta").text(event.data.dataEvent.beta);
                        $("#orientation #gamma").text(event.data.dataEvent.gamma);

                        checkOrientation(event.data.dataEvent.gamma);
                    }
                }
            }

            function checkOrientation(orient) {
                //orient = Math.abs(orient);
                console.log("orient", orient);
                $("#orient").text(orient);
                if ((orient <= 0) && (orient > -7)) {
                    $("#image").attr("src", "bork-btn-1.png?r=113");
                    $("#img_debug").text("bork-btn-1.png?r=113");
					console.log("bork-btn-1.png?r=113");
                }
                if ((orient <= -7) && (orient > -15)) {
                    $("#image").attr("src", "bork-btn-2.png?r=113");
                    $("#img_debug").text("bork-btn-2.png?r=113");
					console.log("bork-btn-2.png?r=113");
                }
                if ((orient <= -15) && (orient > -23)) {
                    $("#image").attr("src", "bork-btn-3.png?r=113");
                    $("#img_debug").text("bork-btn-3.png?r=113");
					console.log("bork-btn-3.png?r=113");
                }
                if ((orient <= -23) && (orient > -30)) {
                    $("#image").attr("src", "bork-btn-4.png?r=113");
                    $("#img_debug").text("bork-btn-4.png?r=113");
					console.log("bork-btn-4.png?r=113");
                }
                if ((orient <= -30)) {
                    $("#image").attr("src", "bork-btn-5.png?r=113");
                    $("#img_debug").text("bork-btn-5.png?r=113");
					console.log("bork-btn-5.png?r=113");
                }
            }

            function randomInteger(min, max) {
                var rand = min + Math.random() * (max - min)
                rand = Math.round(rand);
                return rand;
            }

        </script>
    </body>
</html>
