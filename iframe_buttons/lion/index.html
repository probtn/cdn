<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <style>
            body, html {
                margin: 0px;
                padding: 0px;
            }
        </style>

                <script>
                    var context;
                    //window.addEventListener('load', init1, false);

                    /*function init() {
                    try {
                    // Fix up for prefixing
                    window.AudioContext = window.AudioContext || window.webkitAudioContext;
                    context = new AudioContext();

                    function loadDogSound(url) {
                    var request = new XMLHttpRequest();
                    request.open('GET', url, true);
                    request.responseType = 'arraybuffer';

                    function onError(e) {
                    console.log(e);
                    }

                    // Decode asynchronously
                    request.onload = function () {
                    context.decodeAudioData(request.response, function (buffer) {
                    dogBarkingBuffer = buffer;
                    playSound(dogBarkingBuffer);
                    }, onError);
                    }
                    request.send();
                    }

                    function playSound(buffer) {
                    var source = context.createBufferSource(); // creates a sound source
                    source.buffer = buffer;                    // tell the source which sound to play
                    source.connect(context.destination);       // connect the source to the context's destination (the speakers)
                    source.start(0);                           // play the source now
                    // note: on older systems, may have to use deprecated noteOn(time);
                    }


                    }
                    catch (e) {
                    console.log(e);
                    //alert('Web Audio API is not supported in this browser');
                    }
                    }*/

                    //init();

                    function receiveMessage(event) {
                        console.log("event", event.data);
                        if (event.data.message === "probtn_web_audio_api_enabled") {
                            console.log(event);

                            var myIframe = document.getElementById('iframe');
                            var pic = document.getElementById('pic');

                            console.log("myIframe", myIframe);

                            pic.style.display = 'none';
                            myIframe.style.display = 'block';
                            //loadDogSound("lion.mp3");
                        }
                    }
                    //function init1() {
                    window.addEventListener("message", receiveMessage, false);
                    //}
        </script>
    </head>
    <body>
        <img src="1-static.png" alt="lion" style="width: 200px; height: 200px;" id="pic" />
        <iframe src="iframe/index.html" style="width: 200px; height: 200px; border: 0px; display: none;" id="iframe"></iframe>

    </body>
</html>
